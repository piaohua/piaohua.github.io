<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>[Git] git commit 输入 message 方式和规范 - piaohua&#39;s blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="piaohua" /><meta name="description" content="git commit 输入 message 方式和规范 方式 常见的-m &amp;lt;msg&amp;gt;单行输入 git commit -m &amp;quot;message&amp;quot; . 当要输入多行时，可以不带参数，直接使用git commit会启动默认" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.67.0 with theme even" />


<link rel="canonical" href="https://piaohua.github.io/post/git/20201231-git-commit-message/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.651e6917abb0239242daa570c2bec9867267bbcd83646da5a850afe573347b44.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="[Git] git commit 输入 message 方式和规范" />
<meta property="og:description" content="git commit 输入 message 方式和规范 方式 常见的-m &lt;msg&gt;单行输入 git commit -m &quot;message&quot; . 当要输入多行时，可以不带参数，直接使用git commit会启动默认" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://piaohua.github.io/post/git/20201231-git-commit-message/" />
<meta property="article:published_time" content="2020-12-31T19:50:48+08:00" />
<meta property="article:modified_time" content="2020-12-31T19:50:48+08:00" />
<meta itemprop="name" content="[Git] git commit 输入 message 方式和规范">
<meta itemprop="description" content="git commit 输入 message 方式和规范 方式 常见的-m &lt;msg&gt;单行输入 git commit -m &quot;message&quot; . 当要输入多行时，可以不带参数，直接使用git commit会启动默认">
<meta itemprop="datePublished" content="2020-12-31T19:50:48&#43;08:00" />
<meta itemprop="dateModified" content="2020-12-31T19:50:48&#43;08:00" />
<meta itemprop="wordCount" content="1715">



<meta itemprop="keywords" content="git," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[Git] git commit 输入 message 方式和规范"/>
<meta name="twitter:description" content="git commit 输入 message 方式和规范 方式 常见的-m &lt;msg&gt;单行输入 git commit -m &quot;message&quot; . 当要输入多行时，可以不带参数，直接使用git commit会启动默认"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">piaohua</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/links/">
        <li class="mobile-menu-item">Links</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">piaohua</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/links/">Links</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">[Git] git commit 输入 message 方式和规范</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-12-31 </span>
        <div class="post-category">
            <a href="/categories/git/"> git </a>
            </div>
          <span class="more-meta"> 1715 words </span>
          <span class="more-meta"> 4 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#方式">方式</a></li>
    <li><a href="#规范">规范</a></li>
    <li><a href="#git-commit-模板">git commit 模板</a></li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <blockquote>
<p>git commit 输入 message 方式和规范</p>
</blockquote>
<h2 id="方式">方式</h2>
<p><em><strong>常见的<code>-m &lt;msg&gt;</code>单行输入</strong></em></p>
<pre><code>git commit -m &quot;message&quot; .
</code></pre>
<p>当要输入多行时，可以不带参数，直接使用<code>git commit</code>会启动默认文本编辑器(vi/vim)，自动打开<code>.git/COMMIT_EDITMSG</code>文件
在其中输入内容保存退出即可。</p>
<pre><code>git commit
</code></pre>
<p><em><strong>重用其它commit的message</strong></em></p>
<pre><code>-C &lt;commit&gt;, --reuse-message=&lt;commit&gt;
    Take an existing commit object, and reuse the log message and the
    authorship information (including the timestamp) when creating the
    commit.

-c &lt;commit&gt;, --reedit-message=&lt;commit&gt;
    Like -C, but with -c the editor is invoked, so that the user can
    further edit the commit message.

--reset-author
    When used with -C/-c/--amend options, or when committing after a
    conflicting cherry-pick, declare that the authorship of the resulting
    commit now belongs to the committer. This also renews the author
    timestamp.
</code></pre>
<p>使用<code>-C</code>参数不能重新编辑提交信息，相当于<code>-c &lt;commit&gt; --no-edit</code>，其会完全重用提交信息，包括作者信息和提交时间截
可以添加<code>--reset-author</code>参数使用当前的作者信息和提交时间</p>
<pre><code>git commit -C HEAD --reset-author
</code></pre>
<p><em><strong>从文件或标准输入中读取message信息</strong></em></p>
<pre><code>-F &lt;file&gt;, --file=&lt;file&gt;
    Take the commit message from the given file. Use - to read the
    message from the standard input.
</code></pre>
<p>在<code>.git/COMMIT_EDITMSG</code>文件中#开头行是注释行，不会提交到message中；但是-F参数会包含#开头行，
可以添加<code>--amend</code>参数，则会将#开头行视为注释行去掉。</p>
<pre><code>git commit --amend -F &lt;file&gt;
</code></pre>
<p>使用<code>-</code>来表示读取标准输入内容</p>
<pre><code>echo &quot;message&quot; | git commit -F -
</code></pre>
<p><em><strong>在需要固定message格式的场景中，可以使用模板方式<code>-t &lt;file&gt;</code>提交</strong></em></p>
<pre><code>-t &lt;file&gt;, --template=&lt;file&gt;
    When editing the commit message, start the editor with the contents
    in the given file. The commit.template configuration variable is
    often used to give this option implicitly to the command. This
    mechanism can be used by projects that want to guide participants
    with some hints on what to write in the message in what order. If the
    user exits the editor without editing the message, the commit is
    aborted. This has no effect when a message is given by other means,
    e.g. with the -m or -F options.
</code></pre>
<p>模板方式会启动文本编辑器，需要进行改动，如果没有改动提交会中止
可以用git config设置参数commit.tmplate指定默认的template file</p>
<p><em><strong>不写提交信息方式</strong></em></p>
<pre><code> --allow-empty
     Usually recording a commit that has the exact same tree as its sole
     parent commit is a mistake, and the command prevents you from making
     such a commit. This option bypasses the safety, and is primarily for
     use by foreign SCM interface scripts.

 --allow-empty-message
     Like --allow-empty this command is primarily for use by foreign SCM
     interface scripts. It allows you to create a commit with an empty
     commit message without using plumbing commands like git-commit-
     tree(1).
</code></pre>
<h2 id="规范">规范</h2>
<p>常用提交格式是Angular团队的规范,格式如下：</p>
<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
&lt;BLANK LINE&gt;
&lt;body&gt;
&lt;BLANK LINE&gt;
&lt;footer&gt;
</code></pre>
<p>主要分为三部分(Header，Body, Footer)：</p>
<p><em><strong>标题行(Header): 必填, 描述主要修改类型和内容;type（必需）、scope（可选）和subject（必需）</strong></em></p>
<p>type用于说明 commit 的类别</p>
<pre><code>feat：新功能（feature）
fix：修补bug
docs：文档（documentation）
style： 格式（不影响代码运行的变动）
refactor：重构（即不是新增功能，也不是修改bug的代码变动）
test：增加测试
chore：构建过程或辅助工具的变动
</code></pre>
<p>建议type为(feat和fix)的 commit 出现在 Change log 之中。
其他(docs、chore、style、refactor、test)不放入Change log中。</p>
<p>scope用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。</p>
<p>subject是 commit 目的的简短描述，不超过50个字符。</p>
<pre><code>以动词开头，使用第一人称现在时，比如change，而不是changed或changes
第一个字母小写
结尾不加句号(.)
</code></pre>
<p><em><strong>主题内容(Body): 描述为什么修改, 做了什么样的修改, 以及开发的思路等等</strong></em></p>
<p>Body 部分是对本次 commit 的详细描述，可以分成多行。下面是一个范例</p>
<pre><code>More detailed explanatory text, if necessary.  Wrap it to about 72 characters or so.

Further paragraphs come after blank lines.

- Bullet points are okay, too
- Use a hanging indent
</code></pre>
<ul>
<li>
<p>建议使用第一人称现在时，比如使用change而不是changed或changes。</p>
</li>
<li>
<p>应该说明代码变动的动机，以及与以前行为的对比。</p>
</li>
</ul>
<p><em><strong>页脚注释(Footer): 放 Breaking Changes 或 Closed Issues</strong></em></p>
<p>不兼容变动(Breaking Changes)</p>
<p>如果当前代码与上一个版本不兼容，则 Footer 部分以BREAKING CHANGE开头，后面是对变动的描述、以及变动理由和迁移方法。</p>
<pre><code>BREAKING CHANGE: isolate scope bindings definition has changed.
    To migrate the code follow the example below:
    Before:
    scope: {
      myAttr: 'attribute',
    }
    After:
    scope: {
      myAttr: '@',
    }
    The removed `inject` wasn't generaly useful for directives so there should be no code using it.
</code></pre>
<p>关闭 Issue(Closed Issues)</p>
<p>如果当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue</p>
<pre><code>Closes #123
</code></pre>
<p>也可以一次关闭多个 issue</p>
<pre><code>Closes #123 #234
</code></pre>
<h2 id="git-commit-模板">git commit 模板</h2>
<p>修改 <code>~/.gitconfig</code>, 添加:</p>
<pre><code>[commit]
template = ~/.gitmessage
</code></pre>
<p>新建 <code>~/.gitmessage</code> 内容可以如下:</p>
<pre><code># head: &lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
# - type: feat, fix, docs, style, refactor, test, chore
# - scope: can be empty (eg. if the change is a global or difficult to assign to a single component)
# - subject: start with verb (such as 'change'), 50-character line
#
# body: 72-character wrapped. This should answer:
# * Why was this change necessary?
# * How does it address the problem?
# * Are there any side effects?
#
# footer: 
# - Include a link to the ticket, if any.
# - BREAKING CHANGE
#
</code></pre>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://www.jianshu.com/p/ad461b99e860">git commit中输入message的几种方式</a></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content"><a href="https://piaohua.github.io/" class="theme-link">piaohua</a></span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2020-12-31
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/git/">git</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/chinese/20210101-poetry-tang-liuyuxi/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">[唐诗] 《元日感怀》</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/chinese/20201230-poetry-tang-baijuyi/">
            <span class="next-text nav-default">[唐诗] 《问刘十九》</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: location.pathname,
        title: '[Git] git commit 输入 message 方式和规范',
        clientID: '602710b5b9c12cc49296',
        clientSecret: '87ebd96b5be5d1e80ec4e57ce65541a6b423fed3',
        repo: 'piaohua.github.io',
        owner: 'piaohua',
        admin: ['piaohua'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:wangpiaohua@163.com" class="iconfont icon-email" title="email"></a>
      <a href="https://stackoverflow.com/" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://twitter.com/" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://facebook.com/" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://linkedin.com/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://google.com/" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/piaohua/" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/piaohua-47" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.douban.com/people/47269566/" class="iconfont icon-douban" title="douban"></a>
      <a href="https://getpocket.com/" class="iconfont icon-pocket" title="pocket"></a>
      <a href="https://tumblr.com/" class="iconfont icon-tumblr" title="tumblr"></a>
      <a href="https://instagram.com/" class="iconfont icon-instagram" title="instagram"></a>
      <a href="https://gitlab.com/" class="iconfont icon-gitlab" title="gitlab"></a>
      <a href="https://www.bilibili.com/" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://piaohua.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2020 - 
    2023
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author"><a href="https://piaohua.github.io/" class="theme-link">piaohua</a></span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
